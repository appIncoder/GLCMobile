<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Page du Pasteur</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="home-page">

  <!-- Pull to refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="home-container">

    <!-- Erreur -->
    <ion-card *ngIf="error">
      <ion-card-content>{{ error }}</ion-card-content>
    </ion-card>

    <!-- Contenu -->
    <div class="home-shortcuts" *ngIf="!error && pasteurList.length">

      <!-- Indice swipe -->
      <div class="media-swipe-hint" *ngIf="pasteurList.length > 1">
        <span>Swipe ðŸ‘‰ pour parcourir ðŸ‘ˆ les articles.</span>
      </div>

      <!-- Swiper -->
      <swiper-container
        class="pasteur-swiper"
        [slides-per-view]="1"
        [space-between]="12"
        [auto-height]="true"
        [pagination]="{ clickable: true }"
        (slidechange)="onSwiperSlideChange($event)"
      >
        <swiper-slide *ngFor="let item of pasteurList; let i = index">
          <div class="pasteur-slide">

            <ion-card button>
              <ion-card-header>
                <ion-card-title>{{ item.title }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <ion-img
                  [src]="item.image"
                  alt="Photo du pasteur"
                  class="home-logo"
                ></ion-img>
              </ion-card-content>
            </ion-card>

            <ion-card button>
              <ion-card-content>
                <div [innerHTML]="safeHtml(item.text)"></div>
              </ion-card-content>
            </ion-card>

          </div>
        </swiper-slide>
      </swiper-container>

      <!-- Indicateur custom (bullets + compteur) -->
      <div class="slide-indicator" *ngIf="pasteurList.length > 1">
        <span
          class="dot"
          *ngFor="let _ of pasteurList; let i = index"
          [class.active]="i === activeIndex"
        ></span>

        <div class="slide-count">
          {{ activeIndex + 1 }} / {{ pasteurList.length }}
        </div>
      </div>

    </div>

    <!-- Optionnel : Ã©tat vide -->
    <ion-card *ngIf="!error && !pasteurList.length">
      <ion-card-content>Aucun article disponible.</ion-card-content>
    </ion-card>

  </div>
</ion-content>
