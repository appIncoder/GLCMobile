<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>GLC Media</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="glcmedia-page">
  <div class="media-container">

    <div class="media-intro">
      Retrouvez ici les dernières vidéos publiées sur la chaîne YouTube du
      GLC Baudour.
    </div>

    <!-- État de chargement -->
    <div *ngIf="isLoading" class="media-state">
      Chargement des vidéos…
    </div>

    <!-- Erreur -->
    <div *ngIf="!isLoading && error" class="media-state error">
      {{ error }}
    </div>

    <!-- Liste des vidéos -->
    <div *ngIf="!isLoading && !error" class="video-list">
      <ion-card
        class="video-card"
        *ngFor="let video of videos"
        button
        (click)="openVideoPlayer(video)"
      >
        <ion-img
          class="video-thumbnail"
          [src]="video.thumbnailUrl"
          [alt]="video.title"
        ></ion-img>

        <ion-card-content>
  <div class="video-hea_der">
    <h2 class="video-title">{{ video.title }}</h2>
    <p class="video-date w-100">
      {{ video.publishedAt | date: 'longDate' }}
    </p>
  </div>
</ion-card-content>
      </ion-card>
    </div>

  </div>

  <!-- Video Player Modal -->
  <ion-modal
    [isOpen]="isVideoModalOpen"
    (didDismiss)="closeVideoPlayer()"
    [breakpoints]="[0, 0.5, 1]"
    [initialBreakpoint]="1"
    handleBehavior="cycle"
  >
    <ng-template>
      <ion-content class="video-player-modal">
        <div class="video-player-header">
          <h2>{{ selectedVideo?.title }}</h2>
          <ion-button fill="clear" (click)="closeVideoPlayer()">
            Fermer
          </ion-button>
        </div>

        <div class="video-player-container" *ngIf="selectedVideo?.embedUrl">
          <iframe
            [src]="selectedVideo?.embedUrl"
            width="100%"
            height="315"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
